!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=23)}([function(t,e){t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,r){var n=r(14),o=r(15),i=r(8),s=r(16);t.exports=function(t,e){return n(t)||o(t,e)||i(t,e)||s()},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,r){var n=r(17),o=r(18),i=r(8),s=r(19);t.exports=function(t){return n(t)||o(t)||i(t)||s()},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function r(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=r=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),r(e)}t.exports=r,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function r(e){return t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.default=t.exports,t.exports.__esModule=!0,r(e)}t.exports=r,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function r(e,n){return t.exports=r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,r(e,n)}t.exports=r,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,r){var n=r(9);t.exports=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,r){var n=r(7);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,r){var n=r(4).default,o=r(3);t.exports=function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return o(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,r){var n=r(6),o=r(7),i=r(20),s=r(21);function a(e){var r="function"==typeof Map?new Map:void 0;return t.exports=a=function(t){if(null===t||!i(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,e)}function e(){return s(t,arguments,n(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o(e,t)},t.exports.default=t.exports,t.exports.__esModule=!0,a(e)}t.exports=a,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],s=!0,a=!1;try{for(r=r.call(t);!(s=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);s=!0);}catch(t){a=!0,o=t}finally{try{s||null==r.return||r.return()}finally{if(a)throw o}}return i}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,r){var n=r(9);t.exports=function(t){if(Array.isArray(t))return n(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,r){var n=r(7),o=r(22);function i(e,r,s){return o()?(t.exports=i=Reflect.construct,t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=i=function(t,e,r){var o=[null];o.push.apply(o,e);var i=new(Function.bind.apply(t,o));return r&&n(i,r.prototype),i},t.exports.default=t.exports,t.exports.__esModule=!0),i.apply(null,arguments)}t.exports=i,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,r){"use strict";r.r(e),r.d(e,"TinyElement",(function(){return P})),r.d(e,"element",(function(){return R})),r.d(e,"input",(function(){return N})),r.d(e,"query",(function(){return H})),r.d(e,"queryAll",(function(){return $})),r.d(e,"handle",(function(){return D})),r.d(e,"ELEMENT_META_KEY",(function(){return O})),r.d(e,"AttributeValueDataType",(function(){return S}));var n=r(4),o=r.n(n),i=r(1),s=r.n(i),a=r(2),u=r.n(a),l=r(5),c=r.n(l),f=r(10),h=r.n(f),p=r(3),d=r.n(p),y=r(11),v=r.n(y),_=r(12),x=r.n(_),m=r(6),b=r.n(m),g=r(13),w=r.n(g),E=r(0),M=r.n(E),O="__ELEMENT_INFO__",S={STRING:"string",NUMBER:"number",BOOLEAN:"boolean"},j=function t(){c()(this,t),M()(this,"name",null),M()(this,"tpl",null),M()(this,"shadow",!1),M()(this,"accessors",new Map),M()(this,"handlers",new Map),M()(this,"inputs",new Set),M()(this,"bindings",new Map)};function k(t){return null==t}function A(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?A(Object(r),!0).forEach((function(e){M()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=b()(t);if(e){var o=b()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return x()(this,r)}}var P=function(t){v()(r,t);var e=T(r);function r(){var t;return c()(this,r),t=e.call(this),M()(d()(t),"_initialized",!1),M()(d()(t),"_rendered",!1),M()(d()(t),"_metadata",null),M()(d()(t),"_changes",new Map),M()(d()(t),"_props",new Map),M()(d()(t),"_bindings",new Map),M()(d()(t),"_shadowRoot",null),M()(d()(t),"_updateTimer",null),t._metadata=t.constructor[O],t}return h()(r,[{key:"metadata",get:function(){return this._metadata}},{key:"changes",get:function(){return this._changes}},{key:"hasChanges",get:function(){return this.changes.size>0}},{key:"_applyAccessors",value:function(){var t=this;u()(this.metadata.accessors).forEach((function(e){var r=s()(e,2),n=r[0],o=r[1],i=o.selector,a=o.all;Object.defineProperty(t,n,{get:function(){return a?this.$$(i):this.$(i)}})}))}},{key:"_applyInputs",value:function(){var t=this;u()(this.metadata.inputs).forEach((function(e){var r,n=e.property,o=e.attribute,i=e.datatype,s=t.getAttr(n);i===S.NUMBER&&s?s=parseFloat(s):"true"===s||""===s?s=!0:"false"===s&&(s=!1),o?k(r=void 0!==t[n]?t[n]:s)||r===s||t.setAttr(M()({},n,r)):r=t[n],t._pushChange(n,r),t._props.set(n,r),Object.defineProperty(t,n,{get:function(){return this._props.get(n)},set:function(t){o&&(t?this.setAttr(M()({},n,k(t)?t:t.toString())):this.removeAttr(n)),this._pushChange(n,t),this._props.set(n,t),this._initialized&&this._triggerUpdate()}})}))}},{key:"_setHandlersScope",value:function(){var t=this;u()(this.metadata.handlers).forEach((function(e){var r=s()(e,2)[1];u()(r).forEach((function(e){t[e.handler]=t[e.handler].bind(t)}))}))}},{key:"_applyNonWindowHandlers",value:function(){var t=this;u()(this.metadata.handlers).filter((function(t){return"window"!==s()(t,1)[0]})).forEach((function(e){var r=s()(e,2),n=r[0],o=r[1];u()(o).forEach((function(e){var r=e.eventName,o=e.all,i=e.handler;("self"===n?[t]:o?t.$$(n):[t.$(n)]).forEach((function(e){t.on(r,t[i],e)}))}))}))}},{key:"_applyWindowHandlers",value:function(){var t=this;u()(this.metadata.handlers).filter((function(t){return"window"===s()(t,1)[0]})).forEach((function(e){s()(e,2)[1].forEach((function(e){var r=e.eventName,n=e.handler;return t.on(r,t[n],window)}))}))}},{key:"_pushChange",value:function(t,e){if(this._changes.has(t)){var r=this._changes.get(t),n=r.oldValue;r.newValue;this._changes.set(t,{oldValue:n,newValue:e})}else this._changes.set(t,{oldValue:this[t],newValue:e})}},{key:"_triggerUpdate",value:function(){var t=this;this._updateTimer||(this._updateTimer=setTimeout((function(){return t.refresh()}),0))}},{key:"_element",value:function(t){return"window"===t||t===window?t:0===arguments.length||"self"===t?this:t instanceof HTMLElement?t:this.$(t)}},{key:"connectedCallback",value:function(){this._rendered||(this.render(),this._rendered=!0),this._initialized||(this._applyAccessors(),this._applyInputs(),this._setHandlersScope(),this._applyNonWindowHandlers(),this._initialized=!0),this._applyWindowHandlers(),this.onConnected(),this.refresh()}},{key:"disconnectedCallback",value:function(){var t=this,e=this._metadata.handlers,r=void 0===e?{}:e;Object.entries(r).filter((function(t){return"window"===s()(t,1)[0]})).forEach((function(e){s()(e,2)[1].forEach((function(e){var r=e.eventName,n=e.handler;return t.off(r,t[n].bind(t),window)}))})),this.onDisconnected()}},{key:"create",value:function(t,e){var r=this,n=document.createElement(t),i=e||{},a=i.id,u=i.cls,l=i.props,c=i.attrs,f=i.styles,h=i.events,p=i.parent,d=i.html,y=i.children;return a&&(n.id=a),Array.isArray(u)&&this.addClass(u,n),"object"===o()(l)&&Object.entries(l).forEach((function(t){var e=s()(t,2),r=e[0],o=e[1];return n[r]=o})),"object"===o()(c)&&Object.entries(c).forEach((function(t){var e=s()(t,2),r=e[0],o=e[1];return n.setAttribute(r,o)})),"object"===o()(f)&&this.addStyle(f,n),"object"===o()(h)&&Object.entries(h).forEach((function(t){var e=s()(t,2),o=e[0],i=e[1];return r.on(o,i,n)})),"string"==typeof d&&this.updateHtml(d,n),p&&this.addChildren([n],p),Array.isArray(y)&&y.forEach((function(t){var e=t.name,o=t.options;return r.create(e,C(C({},o),{},{parent:n}))})),n}},{key:"$",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return(e=this._element(e))?e===this?this._metadata.shadow?this._shadowRoot.querySelector(t):this.querySelector(t):e instanceof r?e.$(t):e.querySelector(t):this}},{key:"$$",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return(e=this._element(e))?e===this?this._metadata.shadow?this._shadowRoot.querySelectorAll(t):this.querySelectorAll(t):e instanceof r?e.$$(t):e.querySelectorAll(t):this}},{key:"addClass",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return(r=this._element(r))?((e=r.classList).add.apply(e,u()(Array.isArray(t)?t:[t])),this):this}},{key:"removeClass",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return(r=this._element(r))?((e=r.classList).remove.apply(e,u()(Array.isArray(t)?t:[t])),this):this}},{key:"clearClasses",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return(t=this._element(t))?(t.className="",this):this}},{key:"toggleClass",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this;return this.removeClass(t,r).addClass(e,r),this}},{key:"getAttr",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;if(e=this._element(e))return e.getAttribute(t)}},{key:"setAttr",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return(r=this._element(r))?(Object.entries(t).forEach((function(t){var n=s()(t,2),o=n[0],i=n[1];return null===i?e.removeAttr(o):r.setAttribute(o,i)})),this):this}},{key:"removeAttr",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;if(!(e=this._element(e)))return this;(Array.isArray(t)?t:[t]).forEach((function(t){return e.removeAttribute(t)}))}},{key:"getData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return this.getAttr("data-".concat(t),e)}},{key:"setData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return this.setAttr(Object.entries(t).reduce((function(t,e){var r=s()(e,2),n=r[0],o=r[1];return t["data-".concat(n)]=o,t}),{}),e),this}},{key:"getStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;if(e=this._element(e))return e.style[t]}},{key:"addStyle",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return(r=this._element(r))?(Object.entries(t).forEach((function(t){var n=s()(t,2),o=n[0],i=n[1];o.startsWith("--")?r.style.setProperty(o,i):null===i?e.removeStyles(o,r):r.style[o]=i})),this):this}},{key:"clearStyles",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return(t=this._element(t))?(delete t.style,this):this}},{key:"removeStyles",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return(e=this._element(e))?((Array.isArray(t)?t:[t]).forEach((function(t){return e.style[t]=null})),this):this}},{key:"getChild",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return(e=this._element(e))?e.children[t]:this}},{key:"addChildren",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return(e=this._element(e))&&t?(u()(t instanceof HTMLElement?[t]:t).forEach((function(t){return e.appendChild(t)})),this._applyNonWindowHandlers(),this):this}},{key:"removeChildren",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(!(t=this._element(t)))return this;for(;t.firstChild;)t.removeChild(t.lastChild);return this}},{key:"updateHtml",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return(e=this._element(e))?(e.innerHTML=t,this):this}},{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return(t=this._element(t))?(this.removeStyles("display",t),this):this}},{key:"hide",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return(t=this._element(t))?(this.addStyle({display:"none"},t),this):this}},{key:"on",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this;if(!(r=this._element(r)))return this;var n=r.__event_handlers__=r.__event_handlers__||new Map;return n.has(t)||n.set(t,new Set),n.get(t).has(e)||(r.addEventListener(t,e),n.get(t).add(e)),this}},{key:"off",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this;if(!(r=this._element(r)))return this;r.removeEventListener(t,e);var n=r.__event_handlers__=r.__event_handlers__||new Map;return n.has(t)?(n.get(t).delete(e),this):this}},{key:"render",value:function(){if(this._metadata.tpl){var t=document.createElement("template");t.innerHTML=this._metadata.tpl,this._metadata.shadow?(this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.appendChild(t.content.cloneNode(!0))):this.appendChild(t.content.cloneNode(!0))}}},{key:"refresh",value:function(){this.onChanges(this.changes),this.runDecorators(),this.changes.clear(),this._updateTimer&&window.clearTimeout(this._updateTimer),this._updateTimer=null}},{key:"runDecorators",value:function(){var t=this,e=this._metadata.bindings;u()(e).filter((function(t){var e=s()(t,2)[1];return 1===u()(e).filter((function(t){return"input"===t.type})).length})).forEach((function(e){var r=s()(e,2),n=r[0],o=r[1];t.changes.has(n)&&u()(o).forEach((function(e){return"input"!==e.type&&e.apply(t,t[n])}))}))}},{key:"onConnected",value:function(){}},{key:"onDisconnected",value:function(){}},{key:"onChanges",value:function(t){}}]),r}(w()(HTMLElement));function R(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(n){if(window.customElements.get(t))throw new Error("Already an element is registered with the name ".concat(t));window.customElements.define(t,n);var o=L(n);o.name=t,o.tpl=e,o.shadow=r,I(n,o)}}function N(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.STRING;return function(r,n){var o=L(r.constructor),i=o.inputs;if(i.has(n))throw new Error("Input decorator is already applied for the property ".concat(n));i.add({property:n,attribute:t,dataType:e}),I(r.constructor,o)}}function H(t){return function(e,r){var n=L(e.constructor),o=n.accessors;if(o.has(r))throw new Error("Already a CSS selector is assigned for the property ".concat(r));o.set(r,{selector:t}),I(e.constructor,n)}}function $(t){return function(e,r){var n=L(e.constructor),o=n.accessors;if(o.has(r))throw new Error("Already a CSS selector is assigned for the property ".concat(r));o.set(r,{selector:t,all:!0}),I(e.constructor,n)}}function D(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"self",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(n,o){var i=L(n.constructor),s=i.handlers;s.has(e)||s.set(e,new Set),s.get(e).add({eventName:t,handler:o,all:r}),I(n.constructor,i)}}function L(t){return t[O]||new j}function I(t,e){t[O]=e}}])}));
//# sourceMappingURL=tiny.min.js.map